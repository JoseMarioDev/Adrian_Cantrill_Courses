## üóíÔ∏è Notes

### Basics

Concepts

- Global storage platform
- regionally resilient/based
- stored in a specific region, data doesnt leave reason unless you specifiy
- public service, runs from public zone
- store large amts of data - movies, audio, photos, txt
- access via UI/CLI/API/HTTP

Objects

- think of as files you store in a bucket
- made up of
  - key
  - value
  - metadata
- size of object can be 0 bytes to 5TB

Buckets

- created in specific region
- bucket never leaves region unless you config
- blast region is the region it's in
- bucket names need to be globally unique
- can hold unlimited number of objects
- has flat structure
- the UI presents this as folders, but not the case. That's done for visually ease
- folders are referred to as prefixes in S3
- permissions are set on buckets

Exam Power Ups

- bucket names are globally unique
- 3-63 characters all lowercase no underscore, start w/lowercase, cant be ip formatted
- bucket limits - 100 soft limit, 1000 hard per account
- unlimited objects in bucket
- key/value data structure
- is object store
  - not file storage
  - not block storage
- is flat
- cant be mounted as drive
- great for large scale data storage, distribution, upload
- great for offloading

---

### üîê S3 Security (Resource Policies & ACLs)

Concepts

- S3 is private by default
- only identity that has access is the account that created the bucket
- use bucket policies to grant permissions.
  - bucket policies are a form of resource policies, but attached to a bucket
  - only one policy per bucket, but can have multiple statements
- allow/deny same or different accounts
- can allow/deny anonymous principals

Visual Example

- the `principal` part of the policy statement identifies who the statement applies to

  - `principal` is stated in resource policies because it could apply to multiple identities

  ![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/50284e9a-36c4-4bd4-877d-649cdb91aec0/Screen_Shot_2021-05-19_at_6.51.11_PM.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/50284e9a-36c4-4bd4-877d-649cdb91aec0/Screen_Shot_2021-05-19_at_6.51.11_PM.png)

Access Control Lists (ACLs)

- older method of applying permissions to buckets
- can apply to objects and buckets
- not recommended
- inflexible, no conditions

Block Public Access

- apply to anonymous principals
- settings created to enhance security for public access

Exam Power Up

- when to use identity policies vs bucket polices

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e177d8c8-a5e9-43e0-8b12-148a13988dcb/Screen_Shot_2021-05-19_at_6.58.21_PM.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e177d8c8-a5e9-43e0-8b12-148a13988dcb/Screen_Shot_2021-05-19_at_6.58.21_PM.png)

---

### üîê S3 Static Hosting

Concepts

- allows access to S3 via HTTP
- set Index and Error documents
- website endpoint is created
- custom domain via Route 53, but bucket name matters

Use Cases

- off loading
  - static media - images, media, large data
- Out-of-bound pages
  - error or status notification system
- there is a request charge for S3 bucket
  - might incur charges if website has heavy usage

---

### üîê Object Versioning & MFA Delete

Concepts

- feature that can be enabled on an S3 bucket
- is disabled by default
  - once enabled, cannot switch back to disabled
  - can suspend, then re-enabled
- allows bucket to store multiple versions of objects

  - these objects can be referenced by their version ID to interact directly

    ![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/fa40a705-19a6-486c-8b8a-101c9dfa8699/Screen_Shot_2021-05-21_at_8.08.26_AM.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/fa40a705-19a6-486c-8b8a-101c9dfa8699/Screen_Shot_2021-05-21_at_8.08.26_AM.png)

- Objects aren't deleted
  - deleted markers are put in place to hide objects
- you can delete an object still

MFA Delete

- enabled in versioning configuration
- once enabled, MFA is required to change bucket versioning state
- MFA is required to delete versions

---

### üèéÔ∏è S3 Performance Optimization

Concepts

- by default, `PUT` requests are uploaded as a single data stream
  - problem ‚Üí if stream fails, upload fails
    - requires full restart
- any upload up to 5gb data
- multipart uploads break uploads in multiple parts

Multipart Upload

- data is broken up
- min data size is 100mb for multipart
- 10,000 max parts
- last part can be smaller than 5mb
- transfer rate = speeds of all parts

  ![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/6c5f7384-e03a-4510-8a38-66b69bd5215d/Screen_Shot_2021-05-21_at_8.18.12_AM.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/6c5f7384-e03a-4510-8a38-66b69bd5215d/Screen_Shot_2021-05-21_at_8.18.12_AM.png)

S3 Transfer Acceleration

- uses AWS network of edge locations
- needs to be enabled, disabled by default
- restrictions:
  - bucket name cannot contain period
  - name needs to be DNS compatible

---

### üîê Key Management Service (KMS)

introduction to [KMS](https://www.notion.so/KMS-7c2f26be76064f85afcea301ef0c32b5)

---

### üîê Object Encryption

Concepts

- Buckets aren't encrypted, objects are
- encryption defined at object level
- encryption for data at rest
- server side encryption, data is encrypted once it hits S3

  ![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4d24ebd9-8164-4f7b-ac41-3fc6d44dabd8/Screen_Shot_2021-05-23_at_8.24.51_AM.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4d24ebd9-8164-4f7b-ac41-3fc6d44dabd8/Screen_Shot_2021-05-23_at_8.24.51_AM.png)

Client-Side Encryption

- object being uploaded are encrypted by client before they leave

SSE-C

- server side encryption with customer provided keys
- customer is responsible for keys
- S3 manages encryption

  ![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1759e69f-5d94-4a1b-b4df-72a689a926a2/Screen_Shot_2021-05-23_at_8.28.20_AM.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1759e69f-5d94-4a1b-b4df-72a689a926a2/Screen_Shot_2021-05-23_at_8.28.20_AM.png)

SSE-S3

- SSE w/Amazon S3 managed keys
- AWS handles encryption/decryption process
- users just provides object, AWS does rest
- default type of encryption
- may not be suitable if in a heavy regulatory env, or you need to manage keys, or role separation

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/871f0d65-d9b1-4c9d-9494-1af51f6b2807/Screen_Shot_2021-05-23_at_8.31.40_AM.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/871f0d65-d9b1-4c9d-9494-1af51f6b2807/Screen_Shot_2021-05-23_at_8.31.40_AM.png)

SSE-KMS

- SSE w/CMKs stores in AWS KMS
- KMS creates the CMK
- control of master keys and rotation
- allows for role separation

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a0329f76-6a8d-4cce-93cc-d3fca42453b2/Screen_Shot_2021-05-23_at_8.34.16_AM.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a0329f76-6a8d-4cce-93cc-d3fca42453b2/Screen_Shot_2021-05-23_at_8.34.16_AM.png)

Summary

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/fa107d25-aed6-4181-87dd-fc97536dedba/Screen_Shot_2021-05-23_at_8.35.38_AM.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/fa107d25-aed6-4181-87dd-fc97536dedba/Screen_Shot_2021-05-23_at_8.35.38_AM.png)

Default Bucket Encryption

- can specify a specific header when using `PUT` requests for default encryption

  ![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e1cd0421-8776-4f86-9a7b-33e9270cbb5f/Screen_Shot_2021-05-23_at_8.37.29_AM.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e1cd0421-8776-4f86-9a7b-33e9270cbb5f/Screen_Shot_2021-05-23_at_8.37.29_AM.png)

---

### üîê S3 Object Storage Classes

Concepts

- diff tiers

S3 Standard

S3 Standard Infrequent Access

S3 One Zone-Infrequent Access

S3 Glacier

S3 Glacier Deep Archive

Intelligent Tiering

---

### üîê S3 Lifecycle Configuration

Concepts

-

---

### üîê S3 PreSigned URLs

Concepts

-

---

### üîê S3 Select and Glacier Select

Concepts

-

---

### üîê Cross Origin Resource Sharing (CORS)

Concepts

-

---

### üîê S3 Events

Concepts

-

---

### üîê S3 Access Logs

Concepts

-

---

### üîê S3 Requester Pays

Concepts

-

---

### üîê S3 Object Lock

Concepts

-

---
